<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="icon-192.png">

  <title>Fraukes Adventskalender 2025</title>
<script src="lang/de.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      color: white;
      font-family: 'Cinzel Decorative', serif;
      background: url('bilder/hintergrund2.jpg') center/cover fixed no-repeat;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(0,0,0,0.65);
      padding: 15px 10px 10px;
      text-align: center;
      backdrop-filter: blur(6px);
      z-index: 20;
    }

    header h1 {
      margin: 0 0 8px;
       display: flex;
  align-items: center;
  justify-content: center;
      font-size: 2rem;
       gap: 8px;     /* kleiner Abstand zwischen Rentier und Text */
    }

    .header-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      align-items: center;
      font-family: 'EB Garamond', serif;
    }
    
.header-icon {
  height: 1.8rem;       /* gleiche HÃ¶he wie die Schrift */
  width: auto;
  vertical-align: middle;
}
    .language-flags {
  margin-top: 8px;
  text-align: center;
}

.language-flags button {
  font-size: 1.6rem;
  background: none;
  border: none;
  cursor: pointer;
  margin: 0 4px;
}

.language-flags button:hover {
  transform: scale(1.1);
}

    main {
      padding-top: 160px;
      display: flex;
      justify-content: center;
    }

    #calendar {
      width: 100%;
     max-width: 750px;   /* ideale Breite fÃ¼r Laptop */ ;
      margin: 0 auto 40px;
      column-count: 4;
      column-gap: 16px;
    }
    
@media (min-width: 1400px) {
  #calendar { column-count: 5; }
}

@media (max-width: 900px) {
  #calendar { column-count: 3; }
}

@media (max-width: 600px) {
  #calendar { column-count: 2; 
   padding-left: 16px;
   padding-right: 16px;
   }
}


    .modal-icon {
 max-width: 70%;
  height: auto;
  display: block;
  margin: 0 auto;
  object-fit: contain;
  
}
    .dayCard {
      break-inside: avoid;
      background: #7a0000;
      border-radius: 12px;

      margin-bottom: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .dayCard:hover { transform: scale(1.02); }

    .dayNumber {
      padding: 40px 0;
      font-size: 2.2rem;
      text-align: center;
      font-weight: bold;
    }

    .dayThumb {
      width: 100%;
      heigt: auto;
      object-fit: contain;
      display: block;
      border-radius: 10px;
    }

    #modal.hidden { display: none; }

    #modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 50;
    }

    #modalContent {
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(8px);
      padding: 20px;
      border-radius: 16px;
      max-width: 650px;
      width: 100%;
      position: relative;
    }

    #modalClose {
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 26px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
    }

    #modalTitle,
    #modalText {
      text-align: center;
      font-family: 'EB Garamond', serif;
    }
#modalText {
  font-size: 1.3rem;   /* grÃ¶ÃŸerer Text */
  line-height: 1.5;    /* bessere Lesbarkeit */
}
   #modalImageWrapper {
  position: relative;
  margin-top: 15px;
  display: flex;
     align-items: center;
  justify-content: center;
}

#modalImage {
  max-width: 90vw;        /* NEU */
  max-height: 80vh;       /* NEU: Modal-Bild niemals hÃ¶her als Fenster */
 object-fit: contain;
  border-radius: 10px;
}

    .navBtn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.4);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
    }

    #prevImage { left: 8px; }
    #nextImage { right: 8px; }
  </style>
</head>

<body>

<header>
  <h1>    Fraukes Adventskalender 2025</h1>
 
</a>
  <div class="header-controls">
    <label for="simDate"> Test-Datum:</label>
    <input id="simDate" type="text" placeholder="TT.MM.JJJJ">
    <button id="applySimDate">Setzen</button>
    <button id="resetOpen">Reset</button>
  </div>
   <div id="langSelect">
  <button data-lang="de">ðŸ‡©ðŸ‡ª</button>
  <button data-lang="en">ðŸ‡¬ðŸ‡§</button>
  <button data-lang="no">ðŸ‡³ðŸ‡´</button>
</div>
</header>

<main>
  <div id="calendar"></div>
</main>

<div id="modal" class="hidden">
  <div id="modalContent">
    <button id="modalClose">âœ•</button>
    <h2 id="modalTitle"></h2>
    <p id="modalText"></p>

    <div id="modalImageWrapper">
      <button id="prevImage" class="navBtn">â—€</button>
      <img id="modalImage" src="" alt="">
      <button id="nextImage" class="navBtn">â–¶</button>
    </div>
  </div>
</div>

<script>
/* ======================
   TÃœRCHEN: BILDER
   ====================== */

const daysConfig = [
  { day: 1,  images: ["bilder/tuer1.jpg","bilder/tuer1b.jpg","bilder/tuer1c.jpg"] },
  { day: 2,  images: ["bilder/tuer2.jpg","bilder/tuer2b.jpg","bilder/tuer2c.jpg"] },
  { day: 3,  images: ["bilder/tuer3.jpg","bilder/tuer3b.jpg","bilder/tuer3c.jpg"] },
  { day: 4,  images: ["bilder/tuer4.jpg","bilder/tuer4b.jpg","bilder/tuer4c.jpg"] },
  { day: 5,  images: ["bilder/tuer5.jpg","bilder/tuer5b.jpg","bilder/tuer5c.jpg"] },
  { day: 6,  images: ["bilder/tuer6.jpg","bilder/tuer6b.jpg","bilder/tuer6c.jpg"] },
  { day: 7,  images: ["bilder/tuer7.jpg","bilder/tuer7b.jpg","bilder/tuer7c.jpg"] },
  { day: 8,  images: ["bilder/tuer8.jpg","bilder/tuer8b.jpg","bilder/tuer8c.jpg"] },
  { day: 9,  images: ["bilder/tuer9.jpg","bilder/tuer9b.jpg","bilder/tuer9c.jpg"] },
  { day: 10, images: ["bilder/tuer10.jpg","bilder/tuer10b.jpg","bilder/tuer10c.jpg"] },
  { day: 11, images: ["bilder/tuer11.jpg","bilder/tuer11b.jpg","bilder/tuer11c.jpg"] },
  { day: 12, images: ["bilder/tuer12.jpg","bilder/tuer12b.jpg","bilder/tuer12c.jpg"] },
  { day: 13, images: ["bilder/tuer13.jpg","bilder/tuer13b.jpg","bilder/tuer13c.jpg"] },
  { day: 14, images: ["bilder/tuer14.jpg","bilder/tuer14b.jpg","bilder/tuer14c.jpg"] },
  { day: 15, images: ["bilder/tuer15.jpg","bilder/tuer15b.jpg","bilder/tuer15c.jpg"] },
  { day: 16, images: ["bilder/tuer16.jpg","bilder/tuer16b.jpg","bilder/tuer16c.jpg"] },
  { day: 17, images: ["bilder/tuer17.jpg","bilder/tuer17b.jpg","bilder/tuer17c.jpg"] },
  { day: 18, images: ["bilder/tuer18.jpg","bilder/tuer18b.jpg","bilder/tuer18c.jpg"] },
  { day: 19, images: ["bilder/tuer19.jpg","bilder/tuer19b.jpg","bilder/tuer19c.jpg"] },
  { day: 20, images: ["bilder/tuer20.jpg","bilder/tuer20b.jpg","bilder/tuer20c.jpg"] },
  { day: 21, images: ["bilder/tuer21.jpg","bilder/tuer21b.jpg","bilder/tuer21c.jpg"] },
  { day: 22, images: ["bilder/tuer22.jpg","bilder/tuer22b.jpg","bilder/tuer22c.jpg"] },
  { day: 23, images: ["bilder/tuer23.jpg","bilder/tuer23b.jpg","bilder/tuer23c.jpg"] },
  { day: 24, images: ["bilder/tuer24.jpg","bilder/tuer24b.jpg","bilder/tuer24c.jpg"] }
];


/* SHUFFLE Reihenfolge */
const shuffled = [5,12,1,19,7,24,3,16,9,22,14,2,18,11,6,21,4,17,8,23,10,13,15,20];

const STORAGE_PREFIX = "advent2025_";
function isOpened(d) { return localStorage.getItem(STORAGE_PREFIX+d)==="1"; }
function markOpened(d) { localStorage.setItem(STORAGE_PREFIX+d,"1"); }

const calendar = document.getElementById("calendar");

/* SIMULIERTES DATUM */
function parseSim() {
  const v = document.getElementById("simDate").value.trim();
  if (!v) return null;
  const p = v.split(".");
  if (p.length!==3) return null;
  return new Date(+p[2], +p[1]-1, +p[0]);
}
function today() {
  return parseSim() || new Date();
}

/* GRID BAUEN */
shuffled.forEach(dayNum => {
  const cfg = daysConfig.find(d => d.day === dayNum);
  const card = document.createElement("div");
  card.className = "dayCard";
  card.dataset.day = dayNum;

  if (isOpened(dayNum)) {
    const img = document.createElement("img");
    img.className = "dayThumb";
    img.src = cfg.images[0];
    card.appendChild(img);
  } else {
    const num = document.createElement("div");
    num.className = "dayNumber";
    num.textContent = dayNum;
    card.appendChild(num);
  }

  card.addEventListener("click", () => openDoor(dayNum, card));
  calendar.appendChild(card);
});

/* MODAL */
const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalText = document.getElementById("modalText");
const modalImage = document.getElementById("modalImage");

let currentDay = null;
let currentIndex = 0;

function canOpen(day) {
  const d = today();
  const lock = new Date(d.getFullYear(), 11, day);
  return d >= lock;
}

function openDoor(day, card) {
  const cfg = daysConfig.find(d => d.day === day);

  if (!canOpen(day)) {
    modalTitle.innerHTML = `
  <img src="bilder/notyet.gif" class="modal-icon" alt="Not Yet!"> 
`;
    modalText.innerHTML = "";
    modalImage.src = "";
    document.getElementById("prevImage").style.display="none";
    document.getElementById("nextImage").style.display="none";
    modal.classList.remove("hidden");
    return;
  }

  currentDay = day;
  currentIndex = 0;
  modalTitle.textContent = cfg.title;
  
 // TEXT: String oder Array automatisch, ob ein Text oder mehrere
  
  if (Array.isArray(cfg.text)) {
    modalText.innerHTML = cfg.text[0] || "";
  } else {
    modalText.innerHTML = cfg.text || "";
  }

  modalImage.src = cfg.images[0];
  modal.classList.remove("hidden");

  markOpened(day);

  // TÃ¼rchen im thumbnail umwandeln
  card.innerHTML = "";
  const img = document.createElement("img");
  img.className = "dayThumb";
  img.src = cfg.images[0];
  card.appendChild(img);
}

function closeModal() {
  modal.classList.add("hidden");
}

document.getElementById("modalClose").addEventListener("click", closeModal);
modal.addEventListener("click", e => { if (e.target===modal) closeModal(); });

document.getElementById("nextImage").onclick = () => slide(+1);
document.getElementById("prevImage").onclick = () => slide(-1);

function slide(dir) {
  const cfg = daysConfig.find(d => d.day === currentDay);
  currentIndex = (currentIndex + dir + cfg.images.length) % cfg.images.length;
  
  modalImage.src = cfg.images[currentIndex];

  // TEXT: String oder Array automatisch, ob ein Text oder mehrere
  if (Array.isArray(cfg.text)) {
    modalText.innerHTML = cfg.text[currentIndex] || "";
  } else {
    modalText.innerHTML = cfg.text || "";
  }  
}

/* RESET */
document.getElementById("resetOpen").onclick = () => {
  for (let i=1;i<=24;i++) localStorage.removeItem(STORAGE_PREFIX+i);
  location.reload();
};
  /* ===========================
   SWIPE NAVIGATION (Handy)
   =========================== */

let touchStartX = 0;
let touchEndX = 0;

modalImage.addEventListener("touchstart", function(e) {
  touchStartX = e.changedTouches[0].screenX;
});

modalImage.addEventListener("touchend", function(e) {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  const diff = touchEndX - touchStartX;

  // minimale Wischstrecke (sonst lÃ¶st jeder Tap aus)
  if (Math.abs(diff) < 40) return;

  if (diff > 0) {
    // rechts -> links = vorheriges Bild
    slide(-1);
  } else {
    // links -> rechts = nÃ¤chstes Bild
    slide(+1);
  }
}

</script>

</body>
</html>
